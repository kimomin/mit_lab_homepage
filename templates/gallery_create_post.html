{% extends "base.html" %}

{% block title %}Gallery_Create_Post{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="mb-4">Create New Gallery Post</h2>

    <form method="POST">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <div class="form-group">
            <label for="title">Post Title</label>
            <input type="text" class="form-control" name="title" placeholder="Enter title" required>
        </div>

        <div class="form-group">
            <label for="date">Date</label>
            <input type="date" class="form-control" name="date" required>
        </div>

        <div id="image-upload-section">
            <label>Image URLs</label>
            <div class="image-block mb-3">
                <input type="url" name="images[]" class="form-control mb-2" placeholder="Enter Cloudinary URL" required>
                <input type="text" name="descriptions[]" class="form-control mb-2" placeholder="Image description">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="thumbnail_index" value="0" checked>
                    <label class="form-check-label">Set as Thumbnail</label>
                </div>
            </div>
        </div>

        <button type="button" class="btn btn-secondary mb-3" id="add-image">+ Add More Images</button>

        <button type="submit" class="btn btn-success">Create Post</button>
    </form>
</div>

<script>
let imageIndex = 1;
document.getElementById('add-image').addEventListener('click', function() {
    const container = document.getElementById('image-upload-section');

    const block = document.createElement('div');
    block.classList.add('image-block', 'mb-3');
    block.innerHTML = `
        <input type="url" name="images[]" class="form-control mb-2" placeholder="Enter Cloudinary URL" required>
        <input type="text" name="descriptions[]" class="form-control mb-2" placeholder="Image description">
        <div class="form-check">
            <input class="form-check-input" type="radio" name="thumbnail_index" value="${imageIndex}">
            <label class="form-check-label">Set as Thumbnail</label>
        </div>
    `;
    container.appendChild(block);
    imageIndex++;
});
</script>
{% endblock %}