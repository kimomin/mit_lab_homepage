{% extends "base.html" %}
{% block title %}공지 수정{% endblock %}
{% block content %}
<div class="container mt-4">
    <h2>공지 수정</h2>
    <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <div class="form-group">
            <label>Title</label>
            <input type="text" name="title" class="form-control" value="{{ notice.title }}" required>
        </div>
        <div class="form-group mt-3">
            <label>Content</label>
            <textarea name="content" class="form-control" rows="8" required>{{ notice.content }}</textarea>
        </div>

        <div class="form-group mt-4">
            <label>새 첨부파일 추가</label>
            <input type="file" name="files" class="form-control" multiple>
        </div>

        {% if notice.attachments %}
        <div class="form-group mt-4">
            <label>기존 첨부파일</label>
            <ul class="list-group">
                {% for file in notice.attachments %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <a href="{{ url_for('static', filename='upload/' + file.filename) }}" target="_blank">
                        {{ file.filename }}
                    </a>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="delete_attachments" value="{{ file.id }}" id="delete_{{ file.id }}">
                        <label class="form-check-label" for="delete_{{ file.id }}">삭제</label>
                    </div>
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        <button type="submit" class="btn btn-primary mt-3">수정 완료</button>
        <a href="{{ url_for('notice_view_post', notice_id=notice.id) }}" class="btn btn-secondary mt-3">취소</a>
    </form>
</div>
{% endblock %}