{% extends "base.html" %}
{% block title %}공지 보기{% endblock %}
{% block content %}
<div class="container-fluid mt-5 notice-container">
    <div class="post-header text-center my-4">
        <h2>{{ notice.title }}</h2>
        <p class="text-muted">
            Date: {{ notice.created_at.strftime('%Y-%m-%d') }} |
            Views: {{ notice.view_count }}
        </p>
        <hr>
        <div>
            {{ notice.content.replace('\n', '<br>') | safe }}
        </div>
        {% if notice.attachments %}
        <h5>첨부파일</h5>
        <ul>
            {% for file in notice.attachments %}
                <li><a href="{{ url_for('static', filename='upload/' ~ file.filename) }}" target="_blank">{{ file.filename.split('/')[-1] }}</a></li>
            {% endfor %}
        </ul>
        {% endif %}
        {% if current_user.is_authenticated and current_user.is_admin %}
        <a href="{{ url_for('notice_edit_post', notice_id=notice.id) }}" class="btn btn-warning mt-3">Edit</a>
        <form method="POST" action="{{ url_for('delete_notice', notice_id=notice.id) }}" style="display:inline;" onsubmit="return confirm('삭제하시겠습니까?');">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <button type="submit" class="btn btn-danger mt-3">Delete</button>
        </form>
        {% endif %}
        <a href="{{ url_for('notice') }}" class="btn btn-secondary mt-3">Back to List</a>
    </div>
</div>
{% endblock %}